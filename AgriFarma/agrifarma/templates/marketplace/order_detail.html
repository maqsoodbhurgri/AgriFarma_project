{% extends "base.html" %}
{% block content %}
<div class="container my-4">
  <h2>Order {{ order.order_number }}</h2>
  <p>Status: <span class="badge badge-info">{{ order.status }}</span> &nbsp; Payment: <span class="badge badge-secondary">{{ order.payment_status }}</span></p>
  <div class="row">
    <div class="col-md-7">
      <table class="table table-sm">
        <thead><tr><th>Product</th><th>Qty</th><th>Unit</th><th>Total</th></tr></thead>
        <tbody>
        {% for item in order.order_items %}
          <tr>
            <td>{{ item.product_name }}</td>
            <td>{{ item.quantity }}</td>
            <td>PKR {{ '%.2f'|format(item.unit_price) }}</td>
            <td>PKR {{ '%.2f'|format(item.total_price) }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col-md-5">
      <h5>Shipping</h5>
      <p class="mb-1"><strong>{{ order.shipping_name }}</strong></p>
      <p class="mb-1">{{ order.shipping_address }}</p>
      <p class="mb-1">{{ order.shipping_city }}, {{ order.shipping_state }} {{ order.shipping_postal_code }}</p>
      <p class="mb-3">Phone: {{ order.shipping_phone }}</p>
      <h5>Totals</h5>
      <p class="mb-1">Subtotal: PKR {{ '%.2f'|format(order.subtotal) }}</p>
      <p class="mb-1">Shipping: PKR {{ '%.2f'|format(order.shipping_fee) }}</p>
      <p class="mb-1">Tax: PKR {{ '%.2f'|format(order.tax_amount) }}</p>
      <h5>Total: PKR {{ '%.2f'|format(order.total_amount) }}</h5>
    </div>
  </div>
  <a href="{{ url_for('marketplace.orders') }}" class="btn btn-link">Back to Orders</a>
</div>
{% endblock %}
