{% extends 'base.html' %}
{% set page_title = 'Change Password' %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
<style>
  .change-password-container{
    background:#f8f9fa;
    padding:3rem 0;
    min-height:100vh;
  }
  .password-card{
    border:none;
    border-radius:16px;
    box-shadow:0 4px 20px rgba(0,0,0,.08);
    overflow:hidden;
    max-width:600px;
    margin:0 auto;
  }
  .password-card .card-header{
    background:linear-gradient(135deg, #e8f5e9, #c8e6c9);
    border-bottom:3px solid #2e7d32;
    padding:1.5rem;
  }
  .password-card .card-body{
    padding:2.5rem;
    background:#ffffff;
  }
  .form-label{
    font-weight:600;
    color:#2e7d32;
    margin-bottom:0.5rem;
    font-size:0.9rem;
    display:flex;
    align-items:center;
  }
  .form-label i{
    margin-right:8px;
    color:#66bb6a;
  }
  .form-control{
    border:2px solid #e0e0e0;
    border-radius:8px;
    padding:0.75rem 1rem;
    font-size:0.95rem;
    transition:all 0.3s ease;
  }
  .form-control:focus{
    border-color:#2e7d32;
    box-shadow:0 0 0 0.2rem rgba(46,125,50,.15);
  }
  .password-requirements{
    background:#f1f8f4;
    padding:1rem;
    border-radius:8px;
    border-left:4px solid #2e7d32;
    margin-top:1rem;
  }
  .password-requirements ul{
    margin:0;
    padding-left:1.5rem;
  }
  .password-requirements li{
    color:#2e7d32;
    font-size:0.85rem;
    margin-bottom:0.25rem;
  }
</style>
{% endblock %}

{% block content %}
<div class="change-password-container">
  <div class="container">
    <div class="d-flex align-items-center mb-4 justify-content-center">
      <a href="{{ url_for('auth.profile') }}" class="btn btn-outline-success me-3">
        <i class="fa fa-arrow-left me-2"></i>Back to Profile
      </a>
      <h2 class="mb-0 text-dark fw-bold">
        <i class="fas fa-key text-success me-2"></i>Change Password
      </h2>
    </div>

    <div class="card password-card">
      <div class="card-header">
        <h5 class="mb-0 text-dark fw-bold">
          <i class="fas fa-shield-alt text-success me-2"></i>Update Your Password
        </h5>
        <p class="text-muted mb-0 mt-2 small">
          Choose a strong password to keep your account secure
        </p>
      </div>
      <div class="card-body">
        <form method="post" novalidate>
          {{ form.hidden_tag() }}

          <div class="mb-4">
            <label class="form-label">
              <i class="fas fa-lock"></i>{{ form.current_password.label.text }}
            </label>
            {{ form.current_password(class='form-control', placeholder='Enter your current password') }}
            {% for error in form.current_password.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          </div>

          <div class="mb-4">
            <label class="form-label">
              <i class="fas fa-key"></i>{{ form.new_password.label.text }}
            </label>
            {{ form.new_password(class='form-control', placeholder='Enter new password') }}
            {% for error in form.new_password.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          </div>

          <div class="mb-4">
            <label class="form-label">
              <i class="fas fa-check-circle"></i>{{ form.confirm_password.label.text }}
            </label>
            {{ form.confirm_password(class='form-control', placeholder='Confirm new password') }}
            {% for error in form.confirm_password.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          </div>

          <div class="password-requirements">
            <strong class="text-success d-block mb-2">
              <i class="fas fa-info-circle me-2"></i>Password Requirements:
            </strong>
            <ul>
              <li>Minimum 6 characters long</li>
              <li>Must contain at least one letter</li>
              <li>Must contain at least one number</li>
              <li>Avoid using common words or patterns</li>
            </ul>
          </div>

          <div class="d-flex justify-content-end gap-2 mt-4 pt-3 border-top">
            <a href="{{ url_for('auth.profile') }}" class="btn btn-outline-secondary px-4">
              <i class="fas fa-times me-2"></i>Cancel
            </a>
            <button type="submit" class="btn btn-success px-4">
              <i class="fas fa-save me-2"></i>Update Password
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="text-center mt-4">
      <p class="text-muted">
        <i class="fas fa-lightbulb text-warning me-2"></i>
        <strong>Tip:</strong> Use a unique password that you don't use on other websites
      </p>
    </div>
  </div>
</div>
{% endblock %}
